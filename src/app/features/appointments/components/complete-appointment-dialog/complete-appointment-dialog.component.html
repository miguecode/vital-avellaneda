<dialog
  #dialog
  class="m-auto z-10 rounded-2xl shadow backdrop:bg-black/50 px-8 w-[calc(100%-2rem)] max-w-xl"
>
  <form [formGroup]="form" (ngSubmit)="onClose(form.value)">
    <div class="p-8 text-center">
      @if (config.icon) {
      <div class="flex justify-center mb-4">
        <div
          class="rounded-full p-4"
          [class]="config.iconBgColor || 'bg-lightblue-secondary'"
        >
          <app-svg-icon
            [icon]="$any(config.icon)"
            [class]="config.iconColor || 'text-va-third'"
            size="48px"
          ></app-svg-icon>
        </div>
      </div>
      }
      <h3 class="xs:text-3xl text-2xl font-bold text-gray-800 mb-2 text-pretty">
        {{ config.title }}
      </h3>
      <p class="text-gray-600 mb-8 xs:text-lg text-base text-pretty">{{ config.message }}</p>

      <div class="text-left">

        <!-- Details Input -->
        <div class="mb-4">
          <label
            class="block xs:text-sm text-xt font-medium text-gray-700 mb-1"
            for="details"
            >Detalle general
            <span class="text-va-fifth ml-1">(Obligatorio)</span>
          </label>
          <textarea
            id="details"
            formControlName="details"
            rows="3"
            maxLength="255"
            class="w-full min-h-12 xs:max-h-34 max-h-37 px-3 py-2 border border-gray-300 field-sizing-content
            rounded-md shadow-sm placeholder:text-gray-400 focus:outline-none
           focus:ring-va-fifth focus:border-va-fifth xs:text-sm text-xs"
            placeholder="Completar con el detalle general del diagnÃ³stico."
          ></textarea>
          <div class="text-xs text-gray-500 text-right">
            {{ form.value['details'].length }}/255
          </div>
        </div>

        <!-- Prescriptions Input -->
        <div class="mb-2">
          <label
            class="block xs:text-sm text-xs font-medium text-gray-700 mb-1"
            for="prescriptions"
            >Recetas e indicaciones
            <span class="text-va-fifth ml-1">(Obligatorio)</span>
          </label>
          <textarea
            id="prescriptions"
            formControlName="prescriptions"
            rows="3"
            maxLength="255"
            class="w-full min-h-12 xs:max-h-34 max-h-37 px-3 py-2 border border-gray-300 field-sizing-content
            rounded-md shadow-sm placeholder:text-gray-400 focus:outline-none
           focus:ring-va-fifth focus:border-va-fifth xs:text-sm text-xs"
            placeholder="Completar con recetas, medicamentos e indicaciones."
          ></textarea>
          <div class="text-xs text-gray-500 text-right">
            {{ form.value['prescriptions'].length }}/255
          </div>
        </div>

        <!-- Anotations Optional Input -->
        <div class="mb-2">
          <label
            class="block xs:text-sm text-xs font-medium text-gray-700 mb-1"
            for="anotations"
            >Otras anotaciones
            <span class="text-gray-400 ml-1">(Opcional)</span>
          </label>
          <textarea
            id="anotations"
            formControlName="anotations"
            rows="2"
            maxLength="145"
            class="w-full min-h-12 xs:max-h-20 max-h-23 px-3 py-2 border border-gray-300 field-sizing-content
            rounded-md shadow-sm placeholder:text-gray-400 focus:outline-none
           focus:ring-va-fifth focus:border-va-fifth xs:text-sm text-xs"
            placeholder="Completar con anotaciones extras."
          ></textarea>
          <div class="text-xs text-gray-500 text-right">
            {{ form.value['anotations'].length }}/145
          </div>
        </div>

        <!-- Height and Weight Optional Inputs -->
        <div class="mb-2 flex gap-6">
          <div class="w-1/2">
            <label
              class="block xs:text-sm text-xs font-medium text-gray-700 mb-1"
              for="height"
              >Actualizar Altura
              <span class="text-gray-400 ml-1">(Opcional)</span>
            </label>
            <input 
              type="number" 
              id="height"
              formControlName="height"
              placeholder="100-250 cm."
              [min]="100"
              [max]="250"
              class="w-full rounded-md px-3 py-2 border border-gray-300
               shadow-sm focus:outline-none placeholder:text-gray-400
              focus:ring-va-fifth focus:border-va-fifth xs:text-sm text-xs"
            >
          </div>

          <div class="w-1/2">
            <label
              class="block xs:text-sm text-xs font-medium text-gray-700 mb-1"
              for="weight"
              >Actualizar Peso
              <span class="text-gray-400 ml-1">(Opcional)</span>
            </label>
            <input 
              type="number" 
              id="weight"
              formControlName="weight"
              [min]="30"
              [max]="250"
              placeholder="30-250 kg."
              class="w-full rounded-md px-3 py-2 border border-gray-300
                shadow-sm focus:outline-none placeholder:text-gray-400
              focus:ring-va-fifth focus:border-va-fifth xs:text-sm text-xs"
            >
          </div>
        </div>
      </div>

      <div class="flex justify-center gap-4 mt-6">
        <button
          (click)="onClose(null)"
          type="button"
          class="cursor-pointer py-2 px-6 rounded-lg font-semibold border transition
           border-gray-300 hover:bg-gray-100 active:bg-gray-100/80 xs:text-base text-sm"
        >
          {{ config.cancelText }}
        </button>
        <button
          type="submit"
          class="cursor-pointer py-3 px-7 rounded-lg xs:text-lg text-base font-semibold transition
          disabled:opacity-50 disabled:cursor-auto disabled:select-none"
          [ngClass]="[
            config.confirmTextBgColor || 'bg-va-primary',
            config.confirmTextColor || 'text-white',
            config.confirmTextBgColorHover || 'not-disabled:hover:bg-va-primary/90',
            config.confirmTextBgColorActive || 'not-disabled:active:bg-va-primary/80'
          ]"
          [disabled]="form.invalid"
        >
          {{ config.confirmText || "Aceptar" }}
        </button>
      </div>
    </div>
  </form>
</dialog>
